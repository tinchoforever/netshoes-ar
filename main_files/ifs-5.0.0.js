!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){try{localStorage.setItem(a,JSON.stringify(b))}catch(c){}}function f(a){var b=localStorage.getItem(a);try{return JSON.parse(b)}catch(c){if("SyntaxError"!==c.name)throw c;e(a,b)}return b}function g(a,b,c){e(a.jId+"."+b,c)}function h(a,b){return f(a.jId+"."+b)}function i(a,b){localStorage.removeItem(a.jId+"."+b)}function j(a){var b=new RegExp("^"+a+"\\.");return Object.keys(localStorage).filter(function(a){return b.test(a)}).reduce(function(a,c){return a[c.replace(b,"")]=f(c),a},{})}function k(a,b){var c,d,e={},f=new RegExp("^"+b);for(c in a)f.test(c)&&(d=c.replace(f,""),e[d]=a[c]);return e}function l(a,b){var c=new RegExp("^"+b.sessionId+"\\."),d=b.sessionId!==a.sId;return d&&(g(a,"sessionId",a.sId),Object.keys(b).filter(function(a){return c.test(a)}).forEach(function(b){return i(a,b)})),d}function m(a,b){var c=k(b,b.sessionId+"\\.");b.sessionId!==a.sId&&(c={}),a.sendMessageToParent("data",c)}function n(a,b){var c=new RegExp("^"+a.jId+"\\.");"storage"===b.type&&c.test(b.key)&&m(a,j(a.jId))}function o(a,b,c){var d=b.value,e=h(a,"sessionId"),f=e===c;f&&b.hasOwnProperty("value")&&b.hasOwnProperty("key")&&g(a,c+"."+b.key,d)}function p(a,b){var c,d,e;try{c=JSON.parse(b.data)||{}}catch(f){c={}}switch(c.command){case r:a.sId=c.sessionId,d=j(a.jId),e=l(a,d),e&&(d=j(a.jId)),m(a,d);break;case s:o(a,c,a.sId);break;case t:c.hasOwnProperty("key")&&i(a,a.sId+"."+c.key)}}var q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=1,s=2,t=3,u=function(){function a(b,c){d(this,a),this.fId=c,this.jId=b,this.pUrl=document.referrer.replace(/^([a-z]*:\/\/[^\/]+).*$/,"$1")||"*"}return q(a,[{key:"init",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return window.localStorage};try{b()}catch(c){return}window.addEventListener("message",function(b){return p(a,b)},!1),window.addEventListener("storage",function(b){return n(a,b)},!1),this.sendMessageToParent("ready")}},{key:"sendMessageToParent",value:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;window.parent.postMessage(JSON.stringify({id:this.fId,messageType:a,messageBody:b}),this.pUrl)}}]),a}();b.exports=u},{}],2:[function(a,b,c){"use strict";function d(a){var b=window.location.search.match(new RegExp("[?&]"+a+"=([^&]*)(&?)","i"));return b?decodeURIComponent(b[1]):b}var e=a("./StorageCommunicator"),f=new e(d("journeyId"),d("iframeId"));f.init()},{"./StorageCommunicator":1}]},{},[2]);